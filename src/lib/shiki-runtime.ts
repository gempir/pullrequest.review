import {
  createBundledHighlighter,
  createCssVariablesTheme,
  createSingletonShorthands,
  getTokenStyleObject,
  normalizeTheme,
  stringifyTokenStyle,
} from "shiki/core";
import {
  createJavaScriptRegexEngine,
  defaultJavaScriptRegexConstructor,
} from "shiki/engine/javascript";
import { bundledLanguages } from "shiki/langs";

// Keep runtime theme bundle small: only themes selectable in the UI.
export const bundledThemes = {
  "pierre-dark": () => import("@shikijs/themes/github-dark"),
  "pierre-light": () => import("@shikijs/themes/github-light"),
  andromeeda: () => import("@shikijs/themes/andromeeda"),
  "aurora-x": () => import("@shikijs/themes/aurora-x"),
  "ayu-dark": () => import("@shikijs/themes/ayu-dark"),
  "catppuccin-frappe": () => import("@shikijs/themes/catppuccin-frappe"),
  "catppuccin-latte": () => import("@shikijs/themes/catppuccin-latte"),
  "catppuccin-macchiato": () => import("@shikijs/themes/catppuccin-macchiato"),
  "catppuccin-mocha": () => import("@shikijs/themes/catppuccin-mocha"),
  "dark-plus": () => import("@shikijs/themes/dark-plus"),
  dracula: () => import("@shikijs/themes/dracula"),
  "dracula-soft": () => import("@shikijs/themes/dracula-soft"),
  "everforest-dark": () => import("@shikijs/themes/everforest-dark"),
  "everforest-light": () => import("@shikijs/themes/everforest-light"),
  "github-dark-default": () => import("@shikijs/themes/github-dark-default"),
  "github-dark": () => import("@shikijs/themes/github-dark"),
  "github-dark-dimmed": () => import("@shikijs/themes/github-dark-dimmed"),
  "github-dark-high-contrast": () =>
    import("@shikijs/themes/github-dark-high-contrast"),
  "github-light-default": () => import("@shikijs/themes/github-light-default"),
  "github-light": () => import("@shikijs/themes/github-light"),
  "github-light-high-contrast": () =>
    import("@shikijs/themes/github-light-high-contrast"),
  houston: () => import("@shikijs/themes/houston"),
  "kanagawa-dragon": () => import("@shikijs/themes/kanagawa-dragon"),
  "kanagawa-lotus": () => import("@shikijs/themes/kanagawa-lotus"),
  "kanagawa-wave": () => import("@shikijs/themes/kanagawa-wave"),
  laserwave: () => import("@shikijs/themes/laserwave"),
  "light-plus": () => import("@shikijs/themes/light-plus"),
  "material-theme": () => import("@shikijs/themes/material-theme"),
  "material-theme-darker": () =>
    import("@shikijs/themes/material-theme-darker"),
  "material-theme-lighter": () =>
    import("@shikijs/themes/material-theme-lighter"),
  "material-theme-ocean": () => import("@shikijs/themes/material-theme-ocean"),
  "material-theme-palenight": () =>
    import("@shikijs/themes/material-theme-palenight"),
  "min-dark": () => import("@shikijs/themes/min-dark"),
  "min-light": () => import("@shikijs/themes/min-light"),
  monokai: () => import("@shikijs/themes/monokai"),
  "night-owl": () => import("@shikijs/themes/night-owl"),
  nord: () => import("@shikijs/themes/nord"),
  "one-dark-pro": () => import("@shikijs/themes/one-dark-pro"),
  "one-light": () => import("@shikijs/themes/one-light"),
  plastic: () => import("@shikijs/themes/plastic"),
  poimandres: () => import("@shikijs/themes/poimandres"),
  red: () => import("@shikijs/themes/red"),
  "rose-pine": () => import("@shikijs/themes/rose-pine"),
  "rose-pine-dawn": () => import("@shikijs/themes/rose-pine-dawn"),
  "rose-pine-moon": () => import("@shikijs/themes/rose-pine-moon"),
  "slack-dark": () => import("@shikijs/themes/slack-dark"),
  "slack-ochin": () => import("@shikijs/themes/slack-ochin"),
  "snazzy-light": () => import("@shikijs/themes/snazzy-light"),
  "solarized-dark": () => import("@shikijs/themes/solarized-dark"),
  "solarized-light": () => import("@shikijs/themes/solarized-light"),
  "synthwave-84": () => import("@shikijs/themes/synthwave-84"),
  "tokyo-night": () => import("@shikijs/themes/tokyo-night"),
  vesper: () => import("@shikijs/themes/vesper"),
  "vitesse-black": () => import("@shikijs/themes/vitesse-black"),
  "vitesse-dark": () => import("@shikijs/themes/vitesse-dark"),
  "vitesse-light": () => import("@shikijs/themes/vitesse-light"),
} as const;

export {
  bundledLanguages,
  createCssVariablesTheme,
  createJavaScriptRegexEngine,
  defaultJavaScriptRegexConstructor,
  getTokenStyleObject,
  normalizeTheme,
  stringifyTokenStyle,
};

export const createHighlighter = createBundledHighlighter({
  langs: bundledLanguages,
  themes: bundledThemes,
  engine: createJavaScriptRegexEngine,
});

export const { codeToHtml } = createSingletonShorthands(createHighlighter);
